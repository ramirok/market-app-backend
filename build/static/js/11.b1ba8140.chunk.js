(this.webpackJsonpecomerce=this.webpackJsonpecomerce||[]).push([[11],{105:function(e,t,n){e.exports={Button:"Checkout_Button__YO5gh",ItemContainer:"Checkout_ItemContainer__3vpU1",ItemDescription:"Checkout_ItemDescription__-daOG",ImageContainer:"Checkout_ImageContainer__1_fby",PriceItemTotal:"Checkout_PriceItemTotal__2Q7mK",PriceTotal:"Checkout_PriceTotal__3WHAy"}},116:function(e,t,n){"use strict";n.r(t);var a=n(2),r=n.n(a),c=n(4),o=n(1),l=n(0),i=n.n(l),s=n(5),u=n(17),m=n(10),p=n(3),d=n(9),f=n(29),E=n(88),y=n(14),g=n(105),h=n.n(g);t.default=function(){var e=Object(m.b)().loginData,t=Object(u.b)(),n=t.cartItems,a=t.loaded,g=t.resetCart,b=Object(l.useState)(!1),k=Object(o.a)(b,2),C=k[0],_=k[1],O=Object(l.useState)(!1),v=Object(o.a)(O,2),j=v[0],I=v[1],B=Object(l.useState)(!0),F=Object(o.a)(B,2),w=F[0],x=F[1],P=Object(l.useState)(!0),D=Object(o.a)(P,2),N=D[0],T=D[1],S=Object(l.useRef)(),A=n.length>0?n.map((function(e){return e.price*e.quantity})).reduce((function(e,t){return e+t})).toFixed(2):null,Q=Object(s.g)();Object(l.useEffect)((function(){if(e.token&&a&&(Object(p.a)("get","users/user-details",e.token).then((function(t){t.infoCompleted&&t.addressCompleted?x(!1):T(!e.token)})),!C&&!j&&!w)){var t=document.createElement("script");t.src="https://www.paypal.com/sdk/js?client-id=AfDyAFundVVqCD-SQLf583QoeZsuJI6ocD9GxyiODndW2jAB9IuNS8ET_1g4NjEpoUUdRH82OF2uQLRT",document.body.appendChild(t),t.addEventListener("load",(function(){T(!1),n.length>0&&(window.paypal.Buttons({style:{shape:"pill",color:"blue",layout:"vertical",label:"paypal"},createOrder:function(){var t=Object(c.a)(r.a.mark((function t(){var n;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(p.a)("post","users/purchase-aproved",e.token);case 2:return n=t.sent,t.abrupt("return",n.orderID);case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),onApprove:function(){var t=Object(c.a)(r.a.mark((function t(n,a){return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return T(!0),t.next=3,g(e.token,n.orderID);case 3:t.sent?_(!0):I(!0);case 5:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),onError:function(e){I(!0)}}).render(S.current),document.getElementById("spinner").style.display="none",document.getElementById("summary-container").style.display="block")}))}}),[C,n,e.token,j,g,w,Q,a]);var q=i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{id:"spinner"},i.a.createElement(y.a,null)),i.a.createElement("div",{id:"summary-container",style:{display:"none"}},i.a.createElement("h3",{style:{marginBottom:"1rem"}},"Checkout summary"),n.map((function(e){return i.a.createElement("div",{key:e.name,className:h.a.ItemContainer},i.a.createElement("div",{className:h.a.ImageContainer},i.a.createElement("img",{src:"/".concat(e.img),alt:e.name,width:"50px"})),i.a.createElement("div",{className:h.a.ItemDescription},i.a.createElement("p",null,Object(d.a)(e.name)),i.a.createElement("p",null,"$ ",e.price," x",e.quantity),i.a.createElement("p",{className:h.a.PriceItemTotal},"$ ",(e.price*e.quantity).toFixed(2))))})),i.a.createElement("h4",{className:h.a.PriceTotal},"Total: $ ",A),i.a.createElement("div",{ref:S})));return j&&(q=i.a.createElement(i.a.Fragment,null,i.a.createElement("p",{style:{marginBottom:"1rem"}},"Something went wrong, please try again."),i.a.createElement(f.a,{text:"Ok",classFromProps:h.a.Button,onClick:function(){return window.location.reload()}}))),C&&(q=i.a.createElement(i.a.Fragment,null,i.a.createElement("h3",{style:{marginBottom:"1rem"}},"Congratulations"),i.a.createElement("p",{style:{marginBottom:"2rem"}},"Your order has been placed."),i.a.createElement(f.a,{classFromProps:h.a.Button,text:"Check orders",onClick:function(){return Q.push("/app/orders")}}))),w&&(q=i.a.createElement(i.a.Fragment,null,i.a.createElement("p",{style:{marginBottom:"1rem"}},"Please complete your personal information and address in account settings."),i.a.createElement(f.a,{text:"Ok",classFromProps:h.a.Button,onClick:function(){return Q.push("/app/account")}}))),i.a.createElement(E.a,null,N?i.a.createElement(y.a,null):q)}},88:function(e,t,n){"use strict";var a=n(0),r=n.n(a),c=n(89),o=n.n(c);t.a=function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:o.a.Background}),r.a.createElement("form",{className:o.a.FormContainer},e.children))}},89:function(e,t,n){e.exports={Background:"FormContainer_Background__2lPQo",FormContainer:"FormContainer_FormContainer__1rPIB"}}}]);
//# sourceMappingURL=11.b1ba8140.chunk.js.map