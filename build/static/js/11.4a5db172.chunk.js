(this.webpackJsonpecomerce=this.webpackJsonpecomerce||[]).push([[11],{105:function(e,t,a){e.exports={Button:"Checkout_Button__YO5gh",ItemContainer:"Checkout_ItemContainer__3vpU1",ItemDescription:"Checkout_ItemDescription__-daOG",ImageContainer:"Checkout_ImageContainer__1_fby",PriceItemTotal:"Checkout_PriceItemTotal__2Q7mK",PriceTotal:"Checkout_PriceTotal__3WHAy"}},116:function(e,t,a){"use strict";a.r(t);var n=a(2),r=a.n(n),c=a(4),o=a(1),l=a(0),i=a.n(l),m=a(5),s=a(17),u=a(10),p=a(3),d=a(9),f=a(29),E=a(88),h=a(14),y=a(105),g=a.n(y);t.default=function(){var e=Object(u.b)().loginData,t=Object(s.b)(),a=t.cartItems,n=t.loaded,y=t.resetCart,k=Object(l.useState)(!1),b=Object(o.a)(k,2),_=b[0],C=b[1],v=Object(l.useState)(!1),O=Object(o.a)(v,2),j=O[0],I=O[1],w=Object(l.useState)(!0),B=Object(o.a)(w,2),F=B[0],x=B[1],P=Object(l.useState)(!0),N=Object(o.a)(P,2),S=N[0],T=N[1],D=Object(l.useRef)(),q=a.length>0?a.map((function(e){return e.price*e.quantity})).reduce((function(e,t){return e+t})).toFixed(2):null,A=Object(m.g)();Object(l.useEffect)((function(){if(e.token&&n&&(Object(p.a)("get","users/user-details",e.token).then((function(t){t.infoCompleted&&t.addressCompleted?x(!1):T(!e.token)})),!_&&!j&&!F)){var t=document.createElement("script");t.src="https://www.paypal.com/sdk/js?client-id=AV_teTqvX8rl7oj3_wY5lD_NaaMO6J6UvmjiHk_lPSFQk5V4SlMoWrn9IAIXx9NNEShlcQb1C5V3anaS",document.body.appendChild(t),t.addEventListener("load",(function(){T(!1),a.length>0&&(window.paypal.Buttons({style:{shape:"pill",color:"blue",layout:"vertical",label:"paypal"},createOrder:function(){var t=Object(c.a)(r.a.mark((function t(){var a;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(p.a)("post","users/purchase-aproved",e.token);case 2:return a=t.sent,t.abrupt("return",a.orderID);case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),onApprove:function(){var t=Object(c.a)(r.a.mark((function t(a,n){return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return T(!0),t.next=3,y(e.token,a.orderID);case 3:t.sent?C(!0):I(!0);case 5:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}(),onError:function(e){I(!0)}}).render(D.current),document.getElementById("spinner").style.display="none",document.getElementById("summary-container").style.display="block")}))}}),[_,a,e.token,j,y,F,A,n]);var Q=i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{id:"spinner"},i.a.createElement(h.a,null)),i.a.createElement("div",{id:"summary-container",style:{display:"none"}},i.a.createElement("h3",{style:{marginBottom:"1rem"}},"Checkout summary"),a.map((function(e){return i.a.createElement("div",{key:e.name,className:g.a.ItemContainer},i.a.createElement("div",{className:g.a.ImageContainer},i.a.createElement("img",{src:"/".concat(e.img),alt:e.name,width:"50px"})),i.a.createElement("div",{className:g.a.ItemDescription},i.a.createElement("p",null,Object(d.a)(e.name)),i.a.createElement("p",null,"$ ",e.price," x",e.quantity),i.a.createElement("p",{className:g.a.PriceItemTotal},"$ ",(e.price*e.quantity).toFixed(2))))})),i.a.createElement("h4",{className:g.a.PriceTotal},"Total: $ ",q),i.a.createElement("div",{ref:D})));return j&&(Q=i.a.createElement(i.a.Fragment,null,i.a.createElement("p",{style:{marginBottom:"1rem"}},"Something went wrong, please try again."),i.a.createElement(f.a,{text:"Ok",classFromProps:g.a.Button,onClick:function(){return window.location.reload()}}))),_&&(Q=i.a.createElement(i.a.Fragment,null,i.a.createElement("h3",{style:{marginBottom:"1rem"}},"Congratulations"),i.a.createElement("p",{style:{marginBottom:"2rem"}},"Your order has been placed."),i.a.createElement(f.a,{classFromProps:g.a.Button,text:"Check orders",onClick:function(){return A.push("/app/orders")}}))),F&&(Q=i.a.createElement(i.a.Fragment,null,i.a.createElement("p",{style:{marginBottom:"1rem"}},"Please complete your personal information and address in account settings."),i.a.createElement(f.a,{text:"Ok",classFromProps:g.a.Button,onClick:function(){return A.push("/app/account")}}))),i.a.createElement(E.a,null,S?i.a.createElement(h.a,null):Q)}},88:function(e,t,a){"use strict";var n=a(0),r=a.n(n),c=a(89),o=a.n(c);t.a=function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:o.a.Background}),r.a.createElement("form",{className:o.a.FormContainer},e.children))}},89:function(e,t,a){e.exports={Background:"FormContainer_Background__2lPQo",FormContainer:"FormContainer_FormContainer__1rPIB"}}}]);
//# sourceMappingURL=11.4a5db172.chunk.js.map